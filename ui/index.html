<script>
  const apiBase = 'https://brobot18.onrender.com';

  async function getFlowData() {
    const res = await fetch(`${apiBase}/jit-plugin/getFlowTracker`);
    const data = await res.json();
    return data;
  }

  function renderProjects(data, showPaused = false) {
    const active = data.active;
    const paused = showPaused ? data.paused : [];

    const container = document.createElement('div');
    container.innerHTML = `
      <h2>Projects</h2>
      <ul>
        ${active.map(name => `<li>[Active] ${name}</li>`).join('')}
        ${paused.map(name => `<li>[Paused] ${name}</li>`).join('')}
      </ul>
    `;

    const old = document.getElementById('project-list');
    if (old) old.remove();

    container.id = 'project-list';
    document.body.appendChild(container);
  }

  async function loadProjects(showPaused) {
    const data = await getFlowData();
    renderProjects(data, showPaused);
  }

  // Initial load (active only)
  loadProjects(false);

  // Once per day, re-show with paused
  setInterval(() => {
    loadProjects(true);
  }, 86400000); // 24 hours
</script>
